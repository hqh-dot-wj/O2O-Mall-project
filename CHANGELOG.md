# 更新日志

所有重要的变更都将记录在此文件中。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
本项目遵循 [语义化版本](https://semver.org/lang/zh-CN/)。

## [未发布]

### 计划中
- 移动端 H5 版本
- 微服务架构拆分
- Docker Compose 部署方案
- 工作流引擎
- 消息中心

---

## [2.0.0] - 2025-12-16

### 新增
- 🎉 **多租户 SaaS 架构**
  - 完整的租户隔离机制
  - Prisma 扩展自动注入租户过滤
  - 租户管理模块
  - 租户套餐配置
  - 客户端管理（OAuth2）

- 📊 **系统监控与日志**
  - Pino 高性能结构化日志
  - 请求 ID 追踪（UUID）
  - 敏感数据自动脱敏
  - Prometheus 指标采集
  - 健康检查端点（/api/health）
  - 性能监控指标（/api/metrics）

- 🔒 **请求加密**
  - AES-256-CBC + RSA-2048 混合加密
  - RSA 密钥对生成工具
  - 前端自动加密敏感请求
  - 后端解密拦截器

- 🛡️ **权限系统增强**
  - 细粒度权限控制
  - 数据权限（全部、自定义、本部门、本部门及以下、仅本人）
  - 角色权限配置
  - 菜单权限树
  - 按钮级权限控制

- 🌐 **国际化支持**
  - 中文/英文语言切换
  - 完整的 i18n 配置
  - 组件级国际化

### 优化
- ⚡ **性能优化**
  - Prisma 连接池优化
  - Redis 缓存策略
  - 前端路由懒加载
  - 组件异步加载
  - 虚拟滚动支持

- 🎨 **UI/UX 改进**
  - Naive UI 组件库升级
  - 多主题支持（4种预设主题）
  - 深色模式
  - 响应式布局优化
  - 水印功能

- 📝 **代码质量**
  - TypeScript 严格模式
  - ESLint 规则优化
  - 代码注释完善
  - API 文档（Swagger）

### 修复
- 修复租户切换时数据泄露问题
- 修复 JWT Token 刷新逻辑
- 修复文件上传大小限制
- 修复定时任务执行异常
- 修复菜单权限树展示错误

### 技术栈升级
- NestJS: 9.x → 10.x
- Vue: 3.3.x → 3.5.x
- Vite: 5.x → 7.x
- Prisma: 4.x → 5.17.x
- Node.js: 18.x → 20.19.x
- pnpm: 8.x → 10.5.x

---

## [1.2.1] - 2024-10-15

### 新增
- OSS 对象存储支持（阿里云、七牛云、MinIO）
- 文件上传下载功能
- OSS 配置管理

### 优化
- 优化登录验证流程
- 改进错误提示信息
- 优化表格查询性能

### 修复
- 修复部门树无限递归问题
- 修复字典数据缓存不一致
- 修复角色权限保存失败

---

## [1.2.0] - 2024-08-20

### 新增
- 定时任务管理
- Cron 表达式配置
- 任务执行日志
- 在线用户管理
- 强制下线功能

### 优化
- 优化 Redis 缓存策略
- 改进菜单路由生成逻辑
- 优化部门树查询性能

### 修复
- 修复菜单排序问题
- 修复用户角色关联查询
- 修复操作日志时间格式

---

## [1.1.0] - 2024-06-15

### 新增
- 系统参数配置
- 通知公告管理
- 操作日志记录
- 登录日志统计
- 系统监控页面

### 优化
- 优化权限验证逻辑
- 改进数据字典管理
- 优化前端路由配置

### 修复
- 修复用户状态切换失败
- 修复角色删除级联问题
- 修复菜单图标显示异常

---

## [1.0.0] - 2024-04-01

### 首次发布 🎉

#### 核心功能
- ✅ 用户管理
- ✅ 角色管理
- ✅ 菜单管理
- ✅ 部门管理
- ✅ 岗位管理
- ✅ 字典管理
- ✅ JWT 认证
- ✅ RBAC 权限控制

#### 技术栈
- 后端: NestJS 9 + Prisma 4 + PostgreSQL
- 前端: Vue 3 + Vite 5 + Naive UI
- 缓存: Redis
- 文档: Swagger

#### 特性
- TypeScript 全栈
- RESTful API
- 响应式设计
- 代码规范化
- Git Hooks

---

## 版本说明

### 版本号规则
- **主版本号**：重大架构变更或不兼容更新
- **次版本号**：新功能添加，向下兼容
- **修订号**：问题修复和小优化

### 更新类型
- `新增`: 新功能
- `优化`: 性能或体验改进
- `修复`: Bug 修复
- `变更`: 破坏性变更
- `废弃`: 即将移除的功能
- `移除`: 已移除的功能
- `安全`: 安全相关修复

---

## 参与贡献

如果您发现了问题或有新功能建议，请：

1. 查看 [Issues](https://github.com/linlingqin77/Nest-Admin/issues) 是否已存在
2. 如不存在，创建新的 Issue
3. 详细描述问题或建议
4. 等待维护者回复

感谢您的贡献！ 🙏
